<header class="h-16 shadow-lg bg-gray-500 bg-opacity-20 backdrop-blur-sm flex items-center transition-all duration-200 fixed w-screen z-50" id="navbar">
    <nav class="flex justify-between items-center md:w-4/5 z-50 w-11/12 mx-auto " x-data="{ isOpen:true }">
        <div>
            <button @click.prevent ="isOpen = !isOpen" class="z-50 relative md:hidden text-white"><ion-icon size="large" aria-hidden="true" name="menu" :name="isOpen?'menu' : 'close'"></ion-icon></button>
        </div>
        <div class="block md:hidden">
            <h2 class="text-xl text-center z-50 relative font-medium italic leading-5 text-white">G&G <br>INGENIERIA</h2>
        </div>
        <div>
            <img class="md:w-16 w-14 md:h-auto z-50 relative" src="logo-removebg.png" />
        </div>
        <div 
        class="md:static absolute top-0 transition-all pt-12 md:pt-0 duration-100 
        md:items-center md:transparent md:bg-transparent bg-black/75 md:min-h-fit min-h-[100vh] 
        left-0 w-full flex items-start md:justify-end md:px-0 pl-5 pr-8" 
        :class="isOpen?'left-[-101%]' : 'left-[0%]' " id="nav_text">
            <ul
            class="flex flex-col items-start
            md:flex-row md:items-center md:justify-end md:[&>a]:p-3 md:[&>a]:mt-0 md:pt-0 gap-10
            pt-12 h-2 hover:[&>a]text-[#f65757] [&>a]:mt-5 md:[&>a]:w-36 [&>a]:p-3 [&>a]:w-full md:text-center
            max-sm:[&>a]:bg-gray-400 [&>a]:rounded-sm max-sm:[&>a]:border-l-4 max-sm:[&>a]:border-l-gray-300
            w-full md:text-white text-black" >
            <a class=" transition-all duration-100 link" href="#inicio">
                <li class=" w-full md:w-auto">
                    Inicio
                </li>
            </a>
            <a class=" transition-all duration-100 link" href="#quienes_somos">
                <li class=" w-full md:w-auto">
                    Quiénes somos
                </li>
            </a>
            <a class=" transition-all duration-100 link" href="#contacto">
                <li class=" w-full md:w-auto">
                    Contacto
                </li>
            </a>
            </ul>
        </div>
    </nav>

    <div 
    id="menu-backdrop"
    class={" absolute bg-black/5 left-[var(--left)] top-[var(--top)] w-[var(--width)] h-[var(--height)] transition-all duration-500 ease-in-out opacity-0"}>

    </div>
</header>

<script>
    const listItem = document.querySelectorAll('a')
    const menuBackdrop = document.querySelector('#menu-backdrop') as HTMLElement
    listItem.forEach((item) => {
        item.addEventListener('mouseenter', () => {
            const { left, top, width, height } = item.getBoundingClientRect()
            const { clientHeight, clientWidth } = item
            console.log(left, top, width, height)
            console.log(clientWidth, clientHeight)
            menuBackdrop.style.setProperty('--left', `${left}px`)
            menuBackdrop.style.setProperty('--top', `${top}px`)
            menuBackdrop.style.setProperty('--width', `${width}px`)
            menuBackdrop.style.setProperty('--height', `${height}px`)
            menuBackdrop.style.opacity = '1'
            menuBackdrop.style.visibility = 'visible'
        })

        item.addEventListener('mouseleave', ()=>{
            menuBackdrop.style.opacity = '0'
            menuBackdrop.style.visibility = 'hidden'
        })
    })
</script>

<script>
    function scrollToSection(sectionId) {
        const section = document.getElementById(sectionId);
        if (section) {
            section.scrollIntoView({ behavior: 'smooth' });
        }
    }

    // Obtén todos los enlaces del menú
    const menuLinks = document.querySelectorAll('.link');

    // Agrega un evento clic a cada enlace
    menuLinks.forEach((link) => {
        link.addEventListener('click', (event) => {
            event.preventDefault(); // Previene el comportamiento predeterminado del enlace
            const targetSectionId = link.getAttribute('href').substring(1); // Obtiene el ID de la sección objetivo
            scrollToSection(targetSectionId); // Llama a la función de desplazamiento suave
        });
    });
</script>
